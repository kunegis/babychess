#! /bin/sh

. sh/tmp.sh

# Generate list of strings
tmp_file=$TMP/babychess.sh.write-strings.$$
cat $* | grep '[^a-z0-9]str_[a-z0-9]' | 
sed 's,^.*[^a-z]\(str_[a-z_0-9][a-z_0-9]*\).*$,\1,g' | sort -u >$tmp_file

echo "\
/* 
 * Automatically generated by $0 
 */ 

#ifndef STRINGS_HH
#define STRINGS_HH

"

# Define str_NAME is integer constant
<$tmp_file awk '
{ print "#define ", $0, "	", FNR }
'
echo

# Define s_NAME is string constant
<$tmp_file sed 's,^str_\(.*\)$,#define s_\1 	"\1",'

echo "
extern const char *string_list[]; 

#endif /* ! STRINGS_HH */

#ifdef STRINGS_DEFINE

const char *string_list[]={
NULL,"

# Array
<$tmp_file sed 's|^str_\(.*\)$|"\1",|g' 

echo "
};

#endif /* STRINGS_DEFINE */"


